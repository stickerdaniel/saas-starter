<script lang="ts">
	import Button from '$lib/components/ui/button/button.svelte';
	import Card from '$lib/components/ui/card/card.svelte';
	import { ChevronRight } from '@lucide/svelte';
	import type { Snippet } from 'svelte';

	type IntegrationCardProps = {
		title: string;
		description: string;
		link?: string;
		secondaryLink?: string;
		secondaryTitle?: string;
		children?: Snippet;
	};
	let {
		children,
		title,
		description,
		link = 'https://github.com/SikandarJODD/cnblocks',
		secondaryLink,
		secondaryTitle
	}: IntegrationCardProps = $props();

	// Extract first part of title for primary button (before " + ")
	const primaryTitle = title.split(' + ')[0];
</script>

<Card class="p-6">
	<div class="relative flex h-full flex-col">
		<div class="*:size-10">{@render children?.()}</div>
		<div class="grow space-y-2 py-6">
			<h3 class="text-base font-medium">{title}</h3>
			<p class="line-clamp-3 text-sm text-muted-foreground">{description}</p>
		</div>
		<div class="flex gap-3 border-t border-dashed pt-6">
			<Button
				variant="secondary"
				size="sm"
				class="gap-1 pr-2 shadow-none"
				href={link}
				target="_blank"
			>
				Visit {secondaryLink ? primaryTitle : title}
				<ChevronRight class="ml-0 !size-3.5 opacity-50" />
			</Button>
			{#if secondaryLink && secondaryTitle}
				<Button
					variant="secondary"
					size="sm"
					class="gap-1 pr-2 shadow-none"
					href={secondaryLink}
					target="_blank"
				>
					Visit {secondaryTitle}
					<ChevronRight class="ml-0 !size-3.5 opacity-50" />
				</Button>
			{/if}
		</div>
	</div>
</Card>
